<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /writeoff/

  DirectoryIndex public/index.php

  # Allow ACME challenges (if needed)
  RewriteRule ^\.well-known/ - [L]

  # Block direct access to non-public folders
  RewriteRule ^(app|config|data|\.git)(/|$) - [F,L]

  # If already in /public, stop here
  RewriteRule ^public/ - [L]

  # Skip existing files/dirs
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # Route everything through /public without exposing /public in the URL
  RewriteRule ^$ public/index.php [L]
  RewriteRule ^(.*)$ public/$1 [L]
</IfModule>
